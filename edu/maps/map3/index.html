<meta charset = "utf-8">
<script type = "text/javascript" src = "../../js/jquery.js"></script>
<script type = "text/javascript" src = "../../js/ajax2.js"></script>
<link rel = "stylesheet" href = "../../styles/main.css">
<audio src = "sound/sound.mp3" autoplay></audio>
<style>
	#map
	{
		background: url(map03.png);
		background-repeat:repeat-y;
		background-position:center center;
		background-attachment:scroll;
		background-size:100% 100%;
	}
</style>
<script type = "text/javascript">
	$(document).ready(function()
	{
		var oo = 0;
		
		window.setInterval(function()
		{
			$("#map").css({'width':$("#map").height()})
			$("#pic").css({'width':($("#pic").height())/3})
			$("#margin").css({'width':($("#pic").height())/20})
			$("#work").css('width',($("#map").width())+($("#pic").width())+($("#margin").width()))
		},5)
		
		$(".dr").draggable()
		$("#modal").draggable({
		grid: [100,50]
		});
		
		var arr = 
		{
			"first": 
			{
				"x":24.61538,
				"y":10
			},
			"second": 
			{
				"x":3,
				"y":3
			},
			"third":
			{
				"x":89,
				"y":52.3647
			},
			"fourth":
			{
				"x":49.3846,
				"y":22.4700
			},
			"fifth":
			{
				"x":28.6153,
				"y":65.9340
			},
			"sixth":
			{
				"x":8.1,
				"y":60
			},
			"seventh":
			{
				"x":72,
				"y":82.8169
			},
			"eight":
			{
				"x":25.0384,
				"y":55.5384
			},
			"nineth":
			{
				"x":91.50769,
				"y":4.53846
			},
			"tenth":
			{
				"x":63.3074,
				"y":92.30615
			}
			
		}
		console.log(arr)
		
		$("#result").click(function()
		{
			$("#result").attr("disabled","disabled")
			$("#result").css("text-decoration","line-through")
			
			var p = $("#pointmap").offset()
			var pt = p.top
			var pl = p.left
			
			var e = ($("#map").width())/50
			
			for(key in arr)
			{
				var ff = $('#'+key).offset()
				ft = ff.top
				fl = ff.left
				
				var mw = ($("#map").width())/100
				var mm = mw*arr[key].x
				
				var fleft = fl-pl
				
				
				var mh = ($("#map").height())/100
				var hh = mh*arr[key].y
				
				var ftop = ft-pt
				
				if(((mm-fleft)<e) && ((mm-fleft)>-e))
				{
					if(((hh-ftop)<e) && ((hh-ftop)>-e))
					{
						$('#'+key).css('background','#4CAF50')
						$("#cr").append('<td class = "a_true"></td>')
						oo++
					}
					else
					{
						$('#'+key).css('background','#D32F2F')
						$("#cr").append('<td class = "a_false"></td>')
					}
				}
				else
				{
					$('#'+key).css('background','#D32F2F')
					$("#cr").append('<td class = "a_false"></td>')
				}
			
			}
			
			$("#modal").show()
			$("#sa").html(oo)
			var real = oo/2
			if(real <= 2)
			{
				var real = 2
			}
			else
			{
			
			}
			
			$("#mark").html(real)
		})
	})
</script>

<div id = "point"></div>
<div id = "work">
	<div id = "pic">
		<h5>Условные обозначения.</h5>
		<table border = "0px" id = "tactic">
			<tr>
				<td>
					<img src = "tactic/red/АВТОМОБИЛЬ.png" id = "third" class = "dr">
				</td>
				<td>
					<img src = "tactic/blue/АВТОМОБИЛЬ.png" class = "dr">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/танк.png" class = "dr">
				</td>
				<td>
					<img src = "tactic/blue/танк.png" id = "first" class = "dr">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/бмп.png" class = "dr">
				</td>
				<td>
					<img src = "tactic/blue/бмп.png" class = "dr" id = "tenth">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/вертолёт.png" class = "dr">
				</td>
				<td>
					<img src = "tactic/blue/вертолёт.png" class = "dr" id = "second">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/гранатомёт.png" class = "dr">
				</td>
				<td>
					<img src = "tactic/blue/гранатомёт.png" class = "dr">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/зрк.png" id = "eight" class = "dr">
				</td>
				<td>
					<img src = "tactic/blue/зрк.png" class = "dr">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/командный пункт.png" id = "fourth" class = "dr">
				</td>
				<td>
					<img src = "tactic/blue/командный пункт.png" class = "dr" id = "fifth">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/противотанковые пушки.png" class = "dr">
				</td>
				<td>
					<img src = "tactic/blue/противотанковые пушки.png" id = "nineth"  class = "dr">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/пулемёт.png" class = "dr" id = "seventh">
				</td>
				<td>
					<img src = "tactic/blue/пулемёт.png" class = "dr">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/радиостанция.png" class = "dr">
				</td>
				<td>
					<img src = "tactic/blue/радиостанция.png" class = "dr" id = "sixth">
				</td>
			<tr>
		</table>
	
		<h6>Переместите знаки на карту!<h6>
	
		<input type = "submit" name = "result" id = "result" class = "btt" value = "Завершить">
		<br>
			<input type = "submit" class = "mbtt" value = "Заново" onclick = "location.href='index.html'">
			<input type = "submit" class = "mbtt" value = "Главная" onclick = "location.href='index.html'">
		
		<h5>Масштаб - 1:10 000<h5>
	</div>
	<div id = "margin"></div>
	<div id = "map">
		<div id = "pointmap"></div>
		
		
	</div>
</div>

<div id = "modal">
	<h1>Завершение тестирования</h1>
	<h3>Оценка: <span id = "mark"></span> (<span id = "sa"></span>/10)<h3>
		<input type = "submit" name = "return" id = "return" class = "btt" style = "width: 100px;" value = "Повтор" onclick = "location.href='index.html'">
	<h5 style = "cursor:move;">(Переместите это окно чтобы узнать подробности)</h5>
	<h5>Правильность:</h5>
	
	<table id = "true">
		<tr id = "cr"></tr>
	</table>
</div>