<meta charset = "utf-8">
<script type = "text/javascript" src = "../../js/jquery.js"></script>
<script type = "text/javascript" src = "../../js/ajax2.js"></script>
<link rel = "stylesheet" href = "../../styles/main.css">
<audio src = "sound/sound.mp3" autoplay></audio>
<style>
	#map
	{
		background: url(map02.png);
		background-repeat:repeat-y;
		background-position:center center;
		background-attachment:scroll;
		background-size:100% 100%;
	}
</style>
<script type = "text/javascript">
	$(document).ready(function()
	{
		var oo = 0;
		
		window.setInterval(function()
		{
			$("#map").css({'width':$("#map").height()})
			$("#pic").css({'width':($("#pic").height())/3})
			$("#margin").css({'width':($("#pic").height())/17})
			$("#work").css('width',($("#map").width())+($("#pic").width())+($("#margin").width()))
		},5)
		
		$(".dr").draggable()
		$("#modal").draggable({
		grid: [100,50]
		});
		
		var arr = 
		{
			"first":
			{
				"x":62.13846,
				"y":60.915384
			},
			"second": 
			{
				"x":31.0384615,
				"y":32.7815384615
			},
			"third":
			{
				"x":79.60769230769,
				"y":11.059230769
			},
			"fourth":
			{
				"x":39.615384,
				"y":18.769230769
			},
			"fifth":
			{
				"x":24.076923076,
				"y":84.92307692307
			},
			"sixth":
			{
				"x":38.584615384615,
				"y":38.0384615384615
			},
			"seventh":
			{
				"x":48.2230769,
				"y":10
			},
			"eights":
			{
				"x":32,
				"y":51.0769230769
			},
			"nineth":
			{
				"x":87.179487179,
				"y":28.20512820
			},
			"tenth":
			{
				"x":57.615384615,
				"y":85.128205128
			}
			
		}
		console.log(arr)
		
		$("#result").click(function()
		{
			$("#result").attr("disabled","disabled")
			$("#result").css("text-decoration","line-through")
			
			var p = $("#pointmap").offset()
			var pt = p.top
			var pl = p.left
			
			var e = ($("#map").width())/50
			
			for(key in arr)
			{
				var ff = $('#'+key).offset()
				ft = ff.top
				fl = ff.left
				
				var mw = ($("#map").width())/100
				var mm = mw*arr[key].x
				
				var fleft = fl-pl
				
				
				var mh = ($("#map").height())/100
				var hh = mh*arr[key].y
				
				var ftop = ft-pt
				
				if(((mm-fleft)<e) && ((mm-fleft)>-e))
				{
					if(((hh-ftop)<e) && ((hh-ftop)>-e))
					{
						$('#'+key).css('background','#4CAF50')
						$("#cr").append('<td class = "a_true"></td>')
						oo++
					}
					else
					{
						$('#'+key).css('background','#D32F2F')
						$("#cr").append('<td class = "a_false"></td>')
					}
				}
				else
				{
					$('#'+key).css('background','#D32F2F')
					$("#cr").append('<td class = "a_false"></td>')
				}
			
			}
			
			$("#modal").show()
			$("#sa").html(oo)
			var real = oo/2
			if(real <= 2)
			{
				var real = 2
			}
			else
			{
			
			}
			
			$("#mark").html(real)
		})
	})
</script>

<div id = "point"></div>
<div id = "work">
	<div id = "pic">
		<h5>Условные обозначения.</h5>
		<table border = "0px" id = "tactic">
			<tr>
				<td>
					<img src = "tactic/red/МБ.png" id = "first" class = "dr">
				</td>
				<td>
					<img src = "tactic/blue/МБ.png" class = "dr">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/КМСР.png" class = "dr" id = "second">
				</td>
				<td>
					<img src = "tactic/blue/КМСР.png" id = "" class = "dr">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/п_ост.png" class = "dr" id = "third">
				</td>
				<td>
					<img src = "tactic/blue/п_ост.png" class = "dr">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/засада.png" class = "dr"id = "fourth">
				</td>
				<td>
					<img src = "tactic/blue/засада.png" class = "dr">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/танк в окопе.png" class = "dr" id = "fifth">
				</td>
				<td>
					<img src = "tactic/blue/танк в окопе.png" class = "dr">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/командный пункт.png" id = "eight" class = "dr">
				</td>
				<td>
					<img src = "tactic/blue/командный пункт.png" class = "dr" id = "sixth">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/МПБ.png" class = "dr" id = "seventh">
				</td>
				<td>
					<img src = "tactic/blue/МПБ.png" class = "dr">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/т.png" class = "dr">
				</td>
				<td>
					<img src = "tactic/blue/т.png" id = "eights"  class = "dr">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/огонь арт.png" class = "dr" id = "nineth">
				</td>
				<td>
					<img src = "tactic/blue/огонь арт.png" class = "dr">
				</td>
			<tr>
			
			<tr>
				<td>
					<img src = "tactic/red/блиндаж.png" class = "dr" id = "tenth">
				</td>
				<td>
					<img src = "tactic/blue/блиндаж.png" class = "dr">
				</td>
			<tr>
		</table>
	
		<h6>Переместите знаки на карту!<h6>
	
		<input type = "submit" name = "result" id = "result" class = "btt" value = "Завершить">
		<br>
			<input type = "submit" class = "mbtt" value = "Заново" onclick = "location.href='index.html'">
			<input type = "submit" class = "mbtt" value = "Главная" onclick = "location.href='../../index.html'">
		
		<h5>Масштаб - 1:10 000<h5>
	</div>
	<div id = "margin"></div>
	<div id = "map">
		<div id = "pointmap"></div>
		
		
	</div>
</div>

<div id = "modal">
	<h1>Завершение тестирования</h1>
	<h3>Оценка: <span id = "mark"></span> (<span id = "sa"></span>/10)<h3>
		<input type = "submit" name = "return" id = "return" class = "btt" style = "width: 100px;" value = "Повтор" onclick = "location.href='index.html'">
	<h5 style = "cursor:move;">(Переместите это окно чтобы узнать подробности)</h5>
	<h5>Правильность:</h5>
	
	<table id = "true">
		<tr id = "cr"></tr>
	</table>
</div>